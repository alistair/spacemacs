#+TITLE: C# layer

[[file:img/csharp.png]] [[file:img/dotnet.png]]

* Table of Contents                                         :TOC_4_gh:noexport:
- [[#description][Description]]
- [[#packages-included][Packages Included]]
- [[#install][Install]]
  - [[#prerequisites][Prerequisites]]
    - [[#aspnet-5][ASP.NET 5]]
    - [[#omnisharp-server][Omnisharp server]]
- [[#caveats][Caveats]]
- [[#key-bindings][Key Bindings]]
  - [[#navigation][Navigation]]
  - [[#helpers-documentation-info][Helpers (documentation, info)]]
  - [[#refactoring][Refactoring]]
  - [[#omnisharp-server-interaction][OmniSharp server interaction]]
  - [[#tests][Tests]]
  - [[#code-manipulation][Code manipulation]]

* Description
This layer adds experimental support for C# language using [[https://github.com/OmniSharp/omnisharp-emacs][OmniSharp]].

* Packages Included
- [[https://github.com/OmniSharp/omnisharp-emacs][OmniSharp-emacs]]

* Install
To use this configuration layer, add it to your =~/.spacemacs=. You will need to
add =csharp= to the existing =dotspacemacs-configuration-layers= list in this
file.

** Prerequisites
*** ASP.NET 5
Follow the instructions for your platform [[https://www.microsoft.com/net/download][here]].

*** Omnisharp server
Omnisharp server can be installed by running =omnisharp-install-server=
, once you have installed this layer, which will download the required version.

OmniSharp should now automatically load and start a server when you open a
=.cs= file.

* Caveats
- It's currently recommended to use the dotnet cli to create projects and solutions.
There is no current support for creating projects/solutions from within emacs.
- No current support for debugging .net core applications exists for emacs.

* Key Bindings
** Navigation

| Key Binding | Description                                   |
|-------------+-----------------------------------------------|
| ~SPC m g f~ | Go to solution file                           |
| ~SPC m g F~ | Go to solution file then member               |
| ~SPC m g c~ | Go to member in current file                  |
| ~SPC m g g~ | Go to definition                              |
| ~SPC m g G~ | Go to definition in other window              |
| ~SPC m g i~ | Find implementations                          |
| ~SPC m g I~ | Find implementations using ido                |
| ~SPC m g m~ | Go to solution member                         |
| ~SPC m g M~ | Go to solution member in other window         |
| ~SPC m g r~ | Go to region                                  |
| ~SPC m g s~ | Find symbols using Helm                       |
| ~SPC m g u~ | Find usages of symbol under cursor using Helm |
| ~SPC m g U~ | Find usages of symbol under cursor using ido  |

** Helpers (documentation, info)

| Key Binding | Description                                                            |
|-------------+------------------------------------------------------------------------|
| ~SPC m h t~ | Get type information for symbol under cursor                           |
| ~SPC m h T~ | Get type information for symbol under cursor and put it into kill-ring |

** Refactoring

| Key Binding | Description                              |
|-------------+------------------------------------------|
| ~SPC m r m~ | Rename symbol under cursor               |
| ~SPC m r r~ | Refactor symbol under cursor             |

** OmniSharp server interaction

| Key Binding | Description                |
|-------------+----------------------------|
| ~SPC m s r~ | Reload the solution        |
| ~SPC m s s~ | Start the OmniSharp server |
| ~SPC m s S~ | Stop the OmniSharp server  |

** Tests

| Key Binding | Description                           |
|-------------+---------------------------------------|
| ~SPC m t b~ | Run all tests in current file/fixture |

** Code manipulation

| Key Binding | Description               |
|-------------+---------------------------|
| ~SPC m u~   | Auto complete overrides   |
| ~SPC m i~   | Fix usings/imports        |
| ~SPC m =~   | Format the current buffer |
